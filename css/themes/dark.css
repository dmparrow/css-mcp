/**
 * themes/dark.css
 * ─────────────────────────────────────────────────────────────────────────────
 * Dark theme – overrides surface, text, and border tokens only.
 * Brand and status colours inherit from theme.config.css automatically.
 *
 * Applies when:
 *   a) OS prefers dark AND no explicit [data-theme] is set on <html>, OR
 *   b) [data-theme="dark"] is set on any element.
 *
 * Why the declarations appear twice:
 *   CSS has no way to share a ruleset between a @media block and a bare
 *   selector without a preprocessor. The @media block handles OS preference;
 *   the bare [data-theme="dark"] selector handles explicit overrides. Both
 *   must declare the same set of properties to guarantee correctness.
 *   Do not remove either block.
 * ─────────────────────────────────────────────────────────────────────────────
 */

/* ── Shared dark-mode property values ── */
[data-theme="dark"],
@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]) {
    color-scheme: dark;

    /* Surface */
    --color-bg-base:          var(--palette-neutral-950);
    --color-bg-subtle:        var(--palette-neutral-900);
    --color-bg-muted:         var(--palette-neutral-800);
    --color-bg-emphasis:      var(--palette-neutral-100);

    --color-surface-default:  #1a1d20;
    --color-surface-raised:   var(--palette-neutral-900);
    --color-surface-overlay:  var(--palette-neutral-800);
    --color-surface-inset:    var(--palette-neutral-700);

    /* Border */
    --color-border-default:   var(--palette-neutral-700);
    --color-border-subtle:    var(--palette-neutral-800);
    --color-border-emphasis:  var(--palette-neutral-500);

    /* Text */
    --color-text-primary:     var(--palette-neutral-50);
    --color-text-secondary:   var(--palette-neutral-300);
    --color-text-muted:       var(--palette-neutral-500);
    --color-text-disabled:    var(--palette-neutral-600);
    --color-text-inverse:     var(--palette-neutral-900);

    /* Status subtle backgrounds (inverted for dark surfaces) */
    --color-success-subtle:   #0d2b12;
    --color-warning-subtle:   #2b1f06;
    --color-danger-subtle:    #2b0d0d;
    --color-info-subtle:      #082428;

    /* Brand subtle background (dark surface tint) */
    --color-brand-subtle:     #1c2333;

    /* Shadows need higher opacity on dark backgrounds */
    --shadow-xs:  0 1px 2px 0 rgb(0 0 0 / 0.3);
    --shadow-sm:  0 1px 3px 0 rgb(0 0 0 / 0.4), 0 1px 2px -1px rgb(0 0 0 / 0.4);
    --shadow-md:  0 4px 6px -1px rgb(0 0 0 / 0.4), 0 2px 4px -2px rgb(0 0 0 / 0.4);
    --shadow-lg:  0 10px 15px -3px rgb(0 0 0 / 0.4), 0 4px 6px -4px rgb(0 0 0 / 0.4);
    --shadow-xl:  0 20px 25px -5px rgb(0 0 0 / 0.4), 0 8px 10px -6px rgb(0 0 0 / 0.4);
  }
}

/* Explicit [data-theme="dark"] wins regardless of OS preference */
[data-theme="dark"] {
  color-scheme: dark;

  --color-bg-base:          var(--palette-neutral-950);
  --color-bg-subtle:        var(--palette-neutral-900);
  --color-bg-muted:         var(--palette-neutral-800);
  --color-bg-emphasis:      var(--palette-neutral-100);

  --color-surface-default:  #1a1d20;
  --color-surface-raised:   var(--palette-neutral-900);
  --color-surface-overlay:  var(--palette-neutral-800);
  --color-surface-inset:    var(--palette-neutral-700);

  --color-border-default:   var(--palette-neutral-700);
  --color-border-subtle:    var(--palette-neutral-800);
  --color-border-emphasis:  var(--palette-neutral-500);

  --color-text-primary:     var(--palette-neutral-50);
  --color-text-secondary:   var(--palette-neutral-300);
  --color-text-muted:       var(--palette-neutral-500);
  --color-text-disabled:    var(--palette-neutral-600);
  --color-text-inverse:     var(--palette-neutral-900);

  --color-success-subtle:   #0d2b12;
  --color-warning-subtle:   #2b1f06;
  --color-danger-subtle:    #2b0d0d;
  --color-info-subtle:      #082428;

  --color-brand-subtle:     #1c2333;

  --shadow-xs:  0 1px 2px 0 rgb(0 0 0 / 0.3);
  --shadow-sm:  0 1px 3px 0 rgb(0 0 0 / 0.4), 0 1px 2px -1px rgb(0 0 0 / 0.4);
  --shadow-md:  0 4px 6px -1px rgb(0 0 0 / 0.4), 0 2px 4px -2px rgb(0 0 0 / 0.4);
  --shadow-lg:  0 10px 15px -3px rgb(0 0 0 / 0.4), 0 4px 6px -4px rgb(0 0 0 / 0.4);
  --shadow-xl:  0 20px 25px -5px rgb(0 0 0 / 0.4), 0 8px 10px -6px rgb(0 0 0 / 0.4);
}

